version: "3.8"

services:
  north-herts-bins:
    build: .
    container_name: north-herts-bins
    restart: unless-stopped
    ports:
      - "8000:8000"
    environment:
      - CACHE_TTL_SECONDS=3600
    healthcheck:
      test: ["CMD", "curl", "-f", "http://localhost:8000/api/health"]
      interval: 30s
      timeout: 10s
      retries: 3
      start_period: 5s

# For Home Assistant addon, you can use this alternative configuration:
# Add to your Home Assistant addons or run as a separate container
# accessible from your Home Assistant instance.
#
# Example with Home Assistant network:
#
#   north-herts-bins:
#     build: .
#     container_name: north-herts-bins
#     restart: unless-stopped
#     ports:
#       - "8000:8000"
#     network_mode: host  # Or use the same network as Home Assistant
